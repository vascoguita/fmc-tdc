.. SPDX-FileCopyrightText: 2022 CERN (home.cern)
..
.. SPDX-License-Identifier: CC-BY-SA-4.0+

##################
Memory map summary
##################

SVEC base registers

+---------------+--------+------------------+------------------+
| HW address    | Type   | Name             | HDL name         |
+---------------+--------+------------------+------------------+
| 0x0000-0x003f | SUBMAP | metadata         | metadata         |
+---------------+--------+------------------+------------------+
| 0x0040-0x005f | BLOCK  | csr              | csr              |
+---------------+--------+------------------+------------------+
| 0x0040        | REG    | csr.app_offset   | csr_app_offset   |
+---------------+--------+------------------+------------------+
| 0x0044        | REG    | csr.resets       | csr_resets       |
+---------------+--------+------------------+------------------+
| 0x0048        | REG    | csr.fmc_presence | csr_fmc_presence |
+---------------+--------+------------------+------------------+
| 0x004c        | REG    | csr.unused0      | csr_unused0      |
+---------------+--------+------------------+------------------+
| 0x0050        | REG    | csr.ddr_status   | csr_ddr_status   |
+---------------+--------+------------------+------------------+
| 0x0054        | REG    | csr.pcb_rev      | csr_pcb_rev      |
+---------------+--------+------------------+------------------+
| 0x0058        | REG    | csr.ddr4_addr    | csr_ddr4_addr    |
+---------------+--------+------------------+------------------+
| 0x005c        | REG    | csr.ddr5_addr    | csr_ddr5_addr    |
+---------------+--------+------------------+------------------+
| 0x0080-0x008f | SUBMAP | therm_id         | therm_id         |
+---------------+--------+------------------+------------------+
| 0x00a0-0x00bf | SUBMAP | fmc_i2c          | fmc_i2c          |
+---------------+--------+------------------+------------------+
| 0x00c0-0x00df | SUBMAP | flash_spi        | flash_spi        |
+---------------+--------+------------------+------------------+
| 0x0100-0x01ff | SUBMAP | vic              | vic              |
+---------------+--------+------------------+------------------+
| 0x0200-0x02ff | SUBMAP | buildinfo        | buildinfo        |
+---------------+--------+------------------+------------------+
| 0x1000-0x17ff | SUBMAP | wrc_regs         | wrc_regs         |
+---------------+--------+------------------+------------------+
| 0x2000-0x2fff | SUBMAP | ddr4_data        | ddr4_data        |
+---------------+--------+------------------+------------------+
| 0x3000-0x3fff | SUBMAP | ddr5_data        | ddr5_data        |
+---------------+--------+------------------+------------------+

Registers description
=====================
csr.app_offset
--------------


* HDL name:  csr_app_offset
* address:  0x40
* block offset:  0x0
* access mode:  ro

offset to the application metadata


+---+---+---+---+---+---+---+---+
| 31| 30| 29| 28| 27| 26| 25| 24|
+---+---+---+---+---+---+---+---+
|              app_offset[31:24]|
+---+---+---+---+---+---+---+---+
| 23| 22| 21| 20| 19| 18| 17| 16|
+---+---+---+---+---+---+---+---+
|              app_offset[23:16]|
+---+---+---+---+---+---+---+---+
| 15| 14| 13| 12| 11| 10|  9|  8|
+---+---+---+---+---+---+---+---+
|               app_offset[15:8]|
+---+---+---+---+---+---+---+---+
|  7|  6|  5|  4|  3|  2|  1|  0|
+---+---+---+---+---+---+---+---+
|                app_offset[7:0]|
+---+---+---+---+---+---+---+---+

csr.resets
----------


* HDL name:  csr_resets
* address:  0x44
* block offset:  0x4
* access mode:  rw

global and application resets


+------+------+------+------+------+------+------+------+
|    31|    30|    29|    28|    27|    26|    25|    24|
+------+------+------+------+------+------+------+------+
|     -|     -|     -|     -|     -|     -|     -|     -|
+------+------+------+------+------+------+------+------+
|    23|    22|    21|    20|    19|    18|    17|    16|
+------+------+------+------+------+------+------+------+
|     -|     -|     -|     -|     -|     -|     -|     -|
+------+------+------+------+------+------+------+------+
|    15|    14|    13|    12|    11|    10|     9|     8|
+------+------+------+------+------+------+------+------+
|     -|     -|     -|     -|     -|     -|     -|     -|
+------+------+------+------+------+------+------+------+
|     7|     6|     5|     4|     3|     2|     1|     0|
+------+------+------+------+------+------+------+------+
|     -|     -|     -|     -|     -|     -|  appl|global|
+------+------+------+------+------+------+------+------+

global
  (not documented)
appl
  (not documented)

csr.fmc_presence
----------------


* HDL name:  csr_fmc_presence
* address:  0x48
* block offset:  0x8
* access mode:  ro

presence lines for the fmcs


+---+---+---+---+---+---+---+---+
| 31| 30| 29| 28| 27| 26| 25| 24|
+---+---+---+---+---+---+---+---+
|            fmc_presence[31:24]|
+---+---+---+---+---+---+---+---+
| 23| 22| 21| 20| 19| 18| 17| 16|
+---+---+---+---+---+---+---+---+
|            fmc_presence[23:16]|
+---+---+---+---+---+---+---+---+
| 15| 14| 13| 12| 11| 10|  9|  8|
+---+---+---+---+---+---+---+---+
|             fmc_presence[15:8]|
+---+---+---+---+---+---+---+---+
|  7|  6|  5|  4|  3|  2|  1|  0|
+---+---+---+---+---+---+---+---+
|              fmc_presence[7:0]|
+---+---+---+---+---+---+---+---+

csr.unused0
-----------


* HDL name:  csr_unused0
* address:  0x4c
* block offset:  0xc
* access mode:  ro

unused (status of gennum)


+--+--+--+--+--+--+--+--+
|31|30|29|28|27|26|25|24|
+--+--+--+--+--+--+--+--+
|         unused0[31:24]|
+--+--+--+--+--+--+--+--+
|23|22|21|20|19|18|17|16|
+--+--+--+--+--+--+--+--+
|         unused0[23:16]|
+--+--+--+--+--+--+--+--+
|15|14|13|12|11|10| 9| 8|
+--+--+--+--+--+--+--+--+
|          unused0[15:8]|
+--+--+--+--+--+--+--+--+
| 7| 6| 5| 4| 3| 2| 1| 0|
+--+--+--+--+--+--+--+--+
|           unused0[7:0]|
+--+--+--+--+--+--+--+--+

csr.ddr_status
--------------


* HDL name:  csr_ddr_status
* address:  0x50
* block offset:  0x10
* access mode:  ro

status of the ddr controllers


+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|             31|             30|             29|             28|             27|             26|             25|             24|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|              -|              -|              -|              -|              -|              -|              -|              -|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|             23|             22|             21|             20|             19|             18|             17|             16|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|              -|              -|              -|              -|              -|              -|              -|              -|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|             15|             14|             13|             12|             11|             10|              9|              8|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|              -|              -|              -|              -|              -|              -|              -|              -|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|              7|              6|              5|              4|              3|              2|              1|              0|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+
|              -|              -|              -|              -|              -|              -|ddr5_calib_done|ddr4_calib_done|
+---------------+---------------+---------------+---------------+---------------+---------------+---------------+---------------+

ddr4_calib_done
  Set when ddr4 calibration is done.
ddr5_calib_done
  Set when ddr5 calibration is done.

csr.pcb_rev
-----------


* HDL name:  csr_pcb_rev
* address:  0x54
* block offset:  0x14
* access mode:  ro

pcb revision


+--+--+--+--+--+--+--+--+
|31|30|29|28|27|26|25|24|
+--+--+--+--+--+--+--+--+
| -| -| -| -| -| -| -| -|
+--+--+--+--+--+--+--+--+
|23|22|21|20|19|18|17|16|
+--+--+--+--+--+--+--+--+
| -| -| -| -| -| -| -| -|
+--+--+--+--+--+--+--+--+
|15|14|13|12|11|10| 9| 8|
+--+--+--+--+--+--+--+--+
| -| -| -| -| -| -| -| -|
+--+--+--+--+--+--+--+--+
| 7| 6| 5| 4| 3| 2| 1| 0|
+--+--+--+--+--+--+--+--+
| -| -| -|      rev[4:0]|
+--+--+--+--+--+--+--+--+

rev
  (not documented)

csr.ddr4_addr
-------------


* HDL name:  csr_ddr4_addr
* address:  0x58
* block offset:  0x18
* access mode:  rw

address of data to read or to write


+--+--+--+--+--+--+--+--+
|31|30|29|28|27|26|25|24|
+--+--+--+--+--+--+--+--+
|       ddr4_addr[31:24]|
+--+--+--+--+--+--+--+--+
|23|22|21|20|19|18|17|16|
+--+--+--+--+--+--+--+--+
|       ddr4_addr[23:16]|
+--+--+--+--+--+--+--+--+
|15|14|13|12|11|10| 9| 8|
+--+--+--+--+--+--+--+--+
|        ddr4_addr[15:8]|
+--+--+--+--+--+--+--+--+
| 7| 6| 5| 4| 3| 2| 1| 0|
+--+--+--+--+--+--+--+--+
|         ddr4_addr[7:0]|
+--+--+--+--+--+--+--+--+

csr.ddr5_addr
-------------


* HDL name:  csr_ddr5_addr
* address:  0x5c
* block offset:  0x1c
* access mode:  rw

address of data to read or to write


+--+--+--+--+--+--+--+--+
|31|30|29|28|27|26|25|24|
+--+--+--+--+--+--+--+--+
|       ddr5_addr[31:24]|
+--+--+--+--+--+--+--+--+
|23|22|21|20|19|18|17|16|
+--+--+--+--+--+--+--+--+
|       ddr5_addr[23:16]|
+--+--+--+--+--+--+--+--+
|15|14|13|12|11|10| 9| 8|
+--+--+--+--+--+--+--+--+
|        ddr5_addr[15:8]|
+--+--+--+--+--+--+--+--+
| 7| 6| 5| 4| 3| 2| 1| 0|
+--+--+--+--+--+--+--+--+
|         ddr5_addr[7:0]|
+--+--+--+--+--+--+--+--+

